\section{SwitchBox Case Studies} \label{sec:usecases}

\TODO{Another possible use case: progressively retiring an old cipher by
switching to a new one}

\TODO{At a high-level, all of these are good, but the devil is always in the
  details. I think it is important to get them as fully fleshed-out as possible
  as soon as possible.  I really want to see the real data and see the
  discussion about what happens if a user was forced to reconfigure.  If you
  already have the data and just haven't added the real charts yet, you could
  also spend some time just writing the text that will go with them.}

\subsection{Intra-file Variable Security Regions (VSR)}

Communicating classified materials, grand jury testimony, corporate secrets,
etc. require the highest level of discretion when handled, yet sensitive
information like this often appears within a (much) larger amount of data that
we care less about in context.

In this scenario, a user wants to indicate one or more regions of a file are
more sensitive than the others. For example, perhaps banking transaction
information is littered throughout a document; perhaps passwords and other
sensitive or compromising information exists within a much larger data file.
This sensitive information would be encrypted using a less performant (sometimes
dramatically so) cipher in exchange for a stronger security guarantee.

The user will not experience a significant performance hit when perusing the
data if the bulk of it is encrypted using a high performance cipher.
Simultaneously, the more sensitive data regions are future-proofed and more
resilient to attack using a high security cipher.

A ``VSR'' is a region of a file that is crypted with the alternative rather than
the primary cipher that encrypts the remaining majority of the file.

Benefit: we can ``future-proof'' our encrypted highly sensitive data against
more powerful future attacks/less trustworthy ciphers while preserving the
performance win from using a faster less secure cipher.

\begin{figure}[ht] \textbf{Custody Panic Use Case: Security Goals vs Time
  Constraint}\par\medskip
     \centering
     {\input{charts/usecase-custody.tex}} \caption{Actual security score vs
     security goal with respect to the time immediately before and after custody
     is lost; this use case employs Mirrored switching to maintain data
     consistency up until mirrored contents encrypted using the low scoring cipher
     configurations are erased, enabling a relatively high speed low energy
     drive-wide cipher switch.}
    \label{fig:usecase-custody}
  \end{figure}

\begin{figure}[ht] \textbf{VSR Use Case: ChaCha8 vs Freestyle Secure Sequential
4KB, 5MB Performance}\par\medskip
   \centering
   {\input{charts/usecase-vsr-bar.tex}} \caption{Median sequential read and
   write latency per 40MB I/O operation size with 3-to-1 ratio of ChaCha8
   nuggets to Freestyle Secure nuggets, respectively. This usecase employs
   Selective switching to achieve an optimal configuration.}
  \label{fig:usecase-vsr-bar}
\end{figure}

\PUNT{\begin{figure}[ht] \textbf{VSR Use Case: Security-Latency Tradeoff vs
   Goals}\par\medskip
   \centering
   {\input{charts/usecase-vsr-tradeoff.tex}} \caption{Median sequential and
   random read and write latency per I/O operation size (4KB, 512KB, 5MB, 40MB)
   with 3-to-1 ratios of multiple cipher configuration pairs ordered by security
   score. This usecase employs Selective switching to achieve configurations
   within and around our latency and security goal region.}
  \label{fig:usecase-vsr-tradeoff}
\end{figure}}

\subsection{Balancing Security Goals with a Constrained Energy Budget}

When our mobile devices enter battery saving mode, it is usually because the
total energy/power budget for the device has become constrained for one reason
or another.

When a device enters this mode, all software and components are configured by
the OS to use as little of the available energy as possible. The filesystem
should be made to behave in a manner that is energy-aware as well.

Our goal is to use as little energy as possible (while reasonably preserving
filesystem performance) until the energy budget changes or the device dies.

Benefit: When constantly streaming data, e.g. using DLNA to stream a high
resolution video wirelessly to a TV on the same network, the ability to adapt to
time-varying data rates and QoS requirements while maintaining confidentiality
and integrity guarantees is paramount. This can be done by trading off a set of
security guarantees with respect to the energy spent crypting each bit. With
cipher switching, the filesystem can react dynamically to the system's total
energy budget while still aiming for the most performant (least latency)
configuration.

\TODO{See my earlier comment (in email or some other TODO) about reading vs.
writing.  It seems fairly clear to me that you can make this work for writes,
but I don't see hwo this works for reads. If the video is stored in a strong
cipher, don't you have to decrypt it at that strength?  Where does the energy
win come from on reads?}

\begin{figure}[ht] \textbf{Batter Saver Use Case: Energy-Security Tradeoff vs
   Strict Energy Budget}\par\medskip
   \centering
   {\input{charts/usecase-battery.tex}} \caption{Median sequential and random
   read and write total energy use with respect to time and security score with
   respect to time; 5MB sequential I/O operation size using a ChaCha8
   configuration, Freestyle Balanced configuration, and a configuration that
   switches between both ciphers (1-to-1 nugget ratio) with Forward switching.}
  \label{fig:usecase-battery}
\end{figure}

\subsection{Responding to End-of-Life Slowdown in Solid State Drives}

Due to garbage collection and the append-mostly nature of SSDs and other NAND
devices, as free space becomes constrained, performance drops off a cliff. This
is a well-studied issue (see related work).

If the filesystem is made aware when the backing store is in such a state, we
can offset some of the (drastic) performance loss by switching the ciphers of
hot nuggets to the fastest cipher available until the disk space problem is
remedied, after which the system can detect return the switched nuggets to their
former encrypted state.

Benefit: we can mitigate the performance loss of a slowing SSD by using a faster
but less secure cipher.

% \begin{figure*}[ht] \textbf{SSD EoL Use Case: Latency-Security Tradeoff vs
%    Goals}\par\medskip
%    \centering
%    {\input{charts/usecase-eol-tradeoff.tex}} \caption{Median sequential and
%    random read and write latency per 40MB sequential I/O operation size using
%    multiple cipher configurations ordered by security score; performance
%    comparison of baseline versus simulated faulty block device (\ie{uniform
%    additional latency}). With Forward switching, the performance impact is
%    offset given our latency and security goals.}
%   \label{fig:usecase-eol-tradeoff}
% \end{figure*}

\subsection{Custody Panic: Securing Device Data Under Duress}

Nation-state and other adversaries have truly extensive compute resources at
their disposal, as well as knowledge of side-channels and access to technology
like q-bit computers.

Suppose one were attempting to re-enter a country through a border checkpoint
after visiting family when one is stopped. Your mobile device is confiscated and
placed in custody of the State. In such a scenario, it would be useful if the
device could switch itself into a more secure state as quickly as possible.

Benefit: greater security guarantee achieved using the highest security
encryption available versus powerful adversaries with unknown means and motive.



\TODO{Talk about some proposed configurations that allow for quick secure erase:
FTL-level partitioning, two drives (like most smartphones), special secure erase
implementation (not ideal). Also talk about how secure erase is very quick
thanks to wear leveling protection being crypto and secure erase implementations
just forgetting the key.}
