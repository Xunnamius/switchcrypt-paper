\section{Introduction}\label{sec:introduction}

There are several important concerns modern filesystems must balance.
Paramount among them are: security of data at rest; performance, \ie{I/O latency
or throughput}); and overall energy budget. However, these concerns exist in
contention with one another. \TODO{More?}

The state of the art for securing data at rest is Full-Drive Encryption
(FDE)\footnote{The common term is full-\emph{disk} encryption, but this work
targets SSDs, so we use \emph{drive}.}. FDE employs a \emph{cryptographic
cipher} to encrypt, decrypt, and authenticate backing store contents on the fly.
Understandably, this comes with considerable impact on system performance and
energy use. \TODO{Android M FDE example from Google. Perhaps another from
someone else. \cite{Google}} Yet, end users expect their device to be secure
\emph{and} performant \emph{and} energy efficient, hence these concerns must be
balanced with respect to the most general use case.

Prior work on balancing the FDE's impact on performance and energy efficiency
focuses on choice of cipher, as different ciphers express different performance
and efficiency characteristics and offer contrasting security guarantees from
one another. The standard choice in FDE is the AES \emph{block cipher} in XTS
mode (AES-XTS). However, Dickens et al.\cite{StrongBox} show that we can achieve
improved performance versus AES-XTS and other block ciphers while providing a
stronger integrity guarantee by choosing a \emph{stream cipher} instead, such as
the ChaCha20\cite{ChaCha20} stream cipher.

But ChaCha20 is not the only stream cipher we can configure for use with FDE.
Other stream ciphers exist with a plethora of different performance
characteristics and security properties beyond integrity guarantees. These
include: the reduced round ChaCha8\cite{ChaCha8}, SalsaX\cite{SalsaX}, mimicking
a stream cipher with AES in counter mode (AES-CTR)\cite{AES-CTR},
Rabbit\cite{Rabbit}, Sosemanuk\cite{Sosemanuk}, Freestyle\cite{Freestyle}, et
cetera. Given these various configurations points, prior work requires a static
configuration choice made offline at compile time or initialization; a single
cipher configuration is deemed optimal given only the most generic usecase.
However, the cipher configuration providing the fastest I/O throughput may be
different than the configuration providing the strongest security guarantees,
and both may differ from the configuration that uses the least amount of energy.

This makes prior work inflexible; while filesystems must balance security,
energy, and performance, a static compile-time configuration choice cannot adapt
to changes in resource availability or runtime environment. Hence, any static
configuration will unilaterally sacrifice one concern for another for the
lifetime of the filesystem.

Fortunately, prior work by Dickens et al. on using fast stream ciphers for FDE
yield deeper insights: the performance improvement of stream ciphers over
AES-XTS for FDE comes from 1) the "append-mostly" behavior of underlying LFS and
2) the organization of the backing store into discrete units a layer above the
block and sector storage paradigm. We can leverage these insights to create a
mechanism for \emph{online cipher configuration switching} during runtime to
meet dynamic latency, energy, and security goals with minimal overhead.

\TODO{Why this flexibility is useful and why anyone would want to pay some
overhead to take advantage of it: a taste of possibilities and the coming
usecases.}

\TODO{We present: SwitchBox!}

\TODO{We demonstrate SwitchBox's effectiveness on ...; we measure using ...; we further demonstrate with usecases ...}

\TODO{Explanation of remaining sections.}

Motivation in this section? Figures that demonstrate ciphers.



Liberal use of todos as placeholders.



Equate flexibility with the ability to operate between the static points. Repeat this wording in the evaluation section.
