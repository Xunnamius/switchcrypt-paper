\section{Case Studies}\label{sec:usecases}

In this section we conclude our case studies. Each experiment below was repeated
10 times with the median result taken.


% ===========================================================
\subsection{``Battery Saver'' Mode}\label{subsec:usecase-battery}

% About: background
In this first case study, we revisit the motivational example
(\cref{sec:motivation}): demonstrating the utility of Forward switching to
complete a workload within a strict energy budget. Here, our netbook's storage
will use {\em Freestyle Balanced} when operating normally and {\em ChaCha8} when
battery saver mode is activated.

% About: setup
To simulate this, we repeat the following twice: 1) we begin writing 10 40MB
files using Freestyle Balanced. 2) After five seconds, our device simulates
battery saver mode by pinning \sys processes to the energy-efficient LITTLE
cores and underclocking them to lowest frequency. 3) We complete the workload.

\input{graphics/fig-usecase-battery}

On the first run, the workload is completed normally. On the second run, when
entering battery saver mode, we additionally trigger a switch to the ChaCha8
crypt using the Forward switching model.

% About: outcome
\Cref{fig:usecase-battery} shows the total energy used after completing both
runs. {\em FB only} (left) favors security even when backups are paused while
{\em Forward (FB+C8)} (right) performs the switch when the system enters battery
saver mode. These results show that using Forward switching resulted in a 3.3x
total energy reduction compared to exclusively using Freestyle Balanced,
allowing us to remain within our energy budget.


% ===============================
\subsection{No-Downtime Encryption Upgrade}\label{subsec:usecase-upgrade}

% About: background
In this second case study we revisit the Mirrored switching example
(\cref{subsec:des-switch}): to upgrade live storage from one cipher to another
without downtime or egregious overhead. Our operator wants to upgrade from {\em
ChaCha20} to {\em Freestyle Fast}.

% About: setup
To simulate pre- and post-migration storage, we execute 10 5MB write-then-read
operations to two \sys instances using ChaCha20 and Freestyle Fast respectively.
We repeat the operations on a third instance using Mirrored switching.

\input{graphics/fig-usecase-upgrade}

% About: outcome
\Cref{fig:usecase-upgrade} shows the performance impact of Mirrored switching
on our . Bars. These results show.


% ================================================================
\subsection{Scalable Encryption}\label{subsec:usecase-agnostic}

% About: background
In this final case study we revisit the Selective switching example
(\cref{subsec:des-switch}): to achieve a performance win by ensuring that the
only data encrypted using the strongest crypt (with the highest overhead) is the
small percentage of our data that needs it. The Selective switching model
requires users to annotate certain files with a special tag via file system
calls and stored in the inode. Because the \sys layer is file-oblivious, every
block I/O through the \sys layer will be labeled with the corresponding cipher.

% About: setup
We begin with 10 5MB and 10 4KB write-then-read operations to two \sys
instances: one using {\em ChaCha8}, a high performance crypt, and the other
using {\em Freestyle Strong}, a high security crypt. We repeat the operations on
a third instance using Selective switching where 30\% of the data is considered
highly sensitive and uses Freestyle Strong.

\input{graphics/fig-usecase-agnostic}

% About: outcome
{\em C8 only} (leftmost) and {\em FS only} (rightmost) in
\cref{fig:usecase-agnostic} show the two extremes: ChaCha8 exhibits low latency,
consistently less than 1s across workloads, while Freestyle Strong exhibits 5s
to 20s latency depending on the workload. {\em Selective (C8+FS)} (middle) shows
a reduction of 3.1x to 4.8x for read latency and 1.6x to 2.8x for write latency,
all without compromising on security. Thus, Selective switching keeps our
sensitive data at the mandated security level while keeping the performance
benefits of using a fast cipher.
