\section{Case Studies}\label{sec:usecases}

In this section, we provide \numCases case studies demonstrating the practical
utility of heterogeneous FDE not achievable with prior work. We cover a wide
range of situations, highlighting concerns like meeting latency goals and
keeping within an energy budget. Each experiment below was repeated 10 times
with the median result taken.


% ===========================================================
\subsection{Battery Saver Mode}\label{subsec:usecase-battery}

% About: motivation
In this first case study, we revisit the motivational example (see
\cref{sec:motivation}). Here, our netbook's storage layer will use the {\em
Freestyle Balanced} crypt when operating normally. When battery saver mode is
activated, storage will switch to the more energy-efficient {\em ChaCha8} crypt.
At the same time, uploading backups will be paused since ChaCha8 is not
ciphertext randomizing. Our goal is to complete our workload before the device
dies.

% About: setup
To simulate this, we repeat the following two times: 1) we begin
writing 10 40MB files using Freestyle Balanced. 2) After five seconds, our
device simulates entering battery saver mode using \texttt{taskset} to
transition \sys processes to the energy-efficient LITTLE cores and underclocking
them to their lowest frequency. 3) We complete the workload.

\input{graphics/fig-usecase-battery}

% About: result
On the first run, the workload is completed normally. On the second run, when
entering battery saver mode, we additionally trigger a switch to the ChaCha8
crypt using the Forward switching model. \Cref{fig:usecase-battery} shows the
total energy used after completing both runs. {\em Freestyle Balanced only}
favors security even when backups are paused while {\em Freestyle Balanced $+$
ChaCha8} performs the switch when the system enters battery saver mode. Our
results show that using Forward switching resulted in a 3.3x total energy
reduction compared to exclusively using Freestyle Balanced only, allowing us to
remain within our energy budget.


% ===============================
\subsection{No-Downtime Encryption Upgrade}\label{subsec:usecase-upgrade}

In our second case study, \TODO{finish}.


% ================================================================
\subsection{Scalable Encryption}\label{subsec:usecase-agnostic}

% About: background
This case study illustrates utility of selective switching to achieve a
performance win---if only a small percentage of the data needs the strongest
encryption, then only a small percentage of the data should have that associated
overhead, while the rest can use a minimalist encryption. As mentioned before,
this feature requires users to annotate certain files with a special tag via
file system calls, which would then be stored in the inode. Because the \sys
layer is file oblivious, every block I/O through the \sys layer will be labeled
with the corresponding cipher.

% About: setup
We begin by with 10 5MB and 4KB write-read operations to two \sys drive
instances: one using ChaCha8 and the other using Freestyle Strong. They
represent two extreme where ChaCha8 is a low-latency cipher and Freestyle Strong
exhibits a very high overhead. We then run another \sys instance with a 7:3
ratio where 30\% of the data considered highly sensitive uses Freestyle Strong.

\input{graphics/fig-usecase-agnostic}

% About: outcome
The left-side and right-side bars in \cref{fig:usecase-agnostic} show the two
extremes; ChaCha8 exhibits a low latency, consistently less than 1 second across
the workloads, while Freestyle Strong exhibits 5 to 20 second latency depending
on the workload. The selective switching (middle bars) shows a reduction of 3.1x
to 4.8x for read latency and 1.6x to 2.8x for write latency, all without
compromising the security needs of the most sensitive data. Thus, selective
switching keeps our sensitive data at the mandated security level while keeping
the performance (and also battery life) benefits of using a fast cipher for the
majority of I/O operations.
